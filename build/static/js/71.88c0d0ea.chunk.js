"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[71],{1569:(e,t,a)=>{a.d(t,{h:()=>i});var r=a(5043),s=a(6378),n=a(9705);const i=()=>{const[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),{showNotification:c}=(0,n.A)(),u=(0,r.useRef)(c),d=(0,r.useRef)(!1);(0,r.useEffect)((()=>{u.current=c}));const p=(0,r.useCallback)((async()=>{i(!0),o(null);try{const e=await s.A.getSuppliers();t(e)}catch(e){o(e),u.current({type:"error",title:"Error",message:"Failed to fetch suppliers"})}finally{i(!1)}}),[]),m=(0,r.useCallback)((async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i(!0),o(null);try{const r=await s.A.createSupplier(e);return t((e=>[...e,r])),a&&u.current({type:"success",title:"Success",message:"Supplier created successfully"}),r}catch(r){throw o(r),a&&u.current({type:"error",title:"Error",message:"Failed to create supplier"}),r}finally{i(!1)}}),[]),y=(0,r.useCallback)((async(e,a)=>{i(!0),o(null);try{const r=await s.A.updateSupplier(e,a);return t((t=>t.map((t=>t.id===e?r:t)))),u.current({type:"success",title:"Success",message:"Supplier updated successfully"}),r}catch(r){throw o(r),u.current({type:"error",title:"Error",message:"Failed to update supplier"}),r}finally{i(!1)}}),[]),f=(0,r.useCallback)((async e=>{i(!0),o(null);try{await s.A.deleteSupplier(e),t((t=>t.filter((t=>t.id!==e))))}catch(a){throw o(a),u.current({type:"error",title:"Error",message:"Failed to delete supplier"}),a}finally{i(!1)}}),[]),h=(0,r.useCallback)((async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&i(!0),o(null);try{return await s.A.getSupplierById(e)}catch(a){throw o(a),u.current({type:"error",title:"Error",message:"Failed to fetch supplier details"}),a}finally{t&&i(!1)}}),[]),w=(0,r.useCallback)((async(e,a)=>{i(!0),o(null);try{const r=await s.A.updateVerificationStatus(e,a);return t((t=>t.map((t=>t.id===e?r:t)))),u.current({type:"success",title:"Success",message:`Supplier ${"verified"===a?"verified":"set to pending"} successfully`}),r}catch(r){throw o(r),u.current({type:"error",title:"Error",message:"Failed to update supplier verification status"}),r}finally{i(!1)}}),[]);(0,r.useEffect)((()=>{d.current||(d.current=!0,p())}),[]);const g=(0,r.useCallback)((async e=>{try{return await s.A.getSupplierDocuments(e)}catch(a){var t;const e=a;return 404!==(null===(t=e.response)||void 0===t?void 0:t.status)&&404!==e.status&&(o(a),u.current({type:"error",title:"Error",message:"Failed to fetch supplier documents"})),[]}}),[]),v=(0,r.useCallback)((async e=>{try{return await s.A.getSupplierAnalytics(e)}catch(a){var t;const e=a;return 404!==(null===(t=e.response)||void 0===t?void 0:t.status)&&404!==e.status&&(o(a),u.current({type:"error",title:"Error",message:"Failed to fetch supplier analytics"})),null}}),[]),b=(0,r.useCallback)((async(e,t)=>{i(!0),o(null);try{const a=await s.A.uploadSupplierImage(e,t);return u.current({type:"success",title:"Success",message:"Supplier image uploaded successfully"}),a}catch(a){throw o(a),u.current({type:"error",title:"Error",message:"Failed to upload supplier image"}),a}finally{i(!1)}}),[]),S=(0,r.useCallback)((async e=>{i(!0),o(null);try{const a=await s.A.banSupplier(e);return t((t=>t.map((t=>t.id===e?a:t)))),a}catch(a){throw o(a),u.current({type:"error",title:"Error",message:"Failed to ban supplier"}),a}finally{i(!1)}}),[]),k=(0,r.useCallback)((async e=>{i(!0),o(null);try{const a=await s.A.unbanSupplier(e);return t((t=>t.map((t=>t.id===e?a:t)))),a}catch(a){throw o(a),u.current({type:"error",title:"Error",message:"Failed to unban supplier"}),a}finally{i(!1)}}),[]);return{suppliers:e,isLoading:a,error:l,fetchSuppliers:p,getSupplierById:h,createSupplier:m,createEntity:m,updateSupplier:y,deleteSupplier:f,deleteEntity:f,updateVerificationStatus:w,getSupplierDocuments:g,getSupplierAnalytics:v,uploadSupplierImage:b,banSupplier:S,unbanSupplier:k}}},6378:(e,t,a)=>{a.d(t,{A:()=>c,s:()=>o});var r=a(1568),s=a(4703),n=a(8479);const i=e=>({id:e.id,name:e.name||"",email:e.email,phone:e.phone||"",address:e.address||"",status:"banned"===e.status?"banned":"active",verificationStatus:"verified"===e.verificationStatus?"verified":"pending",categories:e.categories?[e.categories]:[],contactPerson:e.contactPerson,logo:e.logo||e.image||"",website:""}),l=e=>({id:String(e.id||e.Id||""),name:e.name||e.Name||"",sku:e.sku||e.SKU||"",category:e.category||e.Category||"",price:Number(e.price||e.Price||0),stock:Number(e.stock||e.Stock||0),minimumStock:Number(e.minimumStock||e.MinimumStock||0),status:e.status||e.Status||"active",description:e.description||e.Description||"",image:e.image||e.Image||null,createdAt:e.createdAt||e.CreatedAt||(new Date).toISOString(),updatedAt:e.updatedAt||e.UpdatedAt||(new Date).toISOString()}),o={getSuppliers:async e=>{try{const t=await r.A.get("/suppliers",{params:e});if(t.data&&"success"in t.data&&t.data.success){const e=t.data;if(e.data&&"suppliers"in e.data){return e.data.suppliers.map(i)}if(Array.isArray(e.data)){return e.data.map(i)}return[]}return(Array.isArray(t.data)?t.data:[]).map(i)}catch(t){throw(0,s.hS)(t)}},getSupplierById:async e=>{try{const t=await r.A.get(`/suppliers/${e}`);if(t.data&&"success"in t.data&&t.data.success)return i(t.data.data);{const e=t.data;return i(e)}}catch(t){throw(0,s.hS)(t)}},createSupplier:async e=>{try{const t={email:e.email,password:e.password,contactPerson:e.contactPerson||e.supplierName||"",name:e.name||e.supplierName,phone:e.phone,address:e.address,categories:e.categories||e.businessType,image:e.image},a=await r.A.post("/suppliers",t);if(a.data&&"success"in a.data&&a.data.success)return i(a.data.data);{const e=a.data;return i(e)}}catch(t){throw(0,s.hS)(t)}},updateSupplier:async(e,t)=>{try{const a={};t.supplierName&&(a.name=t.supplierName),t.email&&(a.email=t.email),t.phone&&(a.phone=t.phone),t.address&&(a.address=t.address),t.businessType&&(a.categories=[t.businessType]),t.image&&(a.image=t.image);const s=await r.A.put(`/suppliers/${e}`,a);return n.lg.update(s,"supplier",e)}catch(a){throw(0,s.hS)(a)}},deleteSupplier:async e=>{try{const t=await r.A.delete(`/suppliers/${e}`);return n.lg.delete(t,"supplier",e)}catch(t){throw(0,s.hS)(t)}},updateVerificationStatus:async(e,t)=>{try{const a=await r.A.put(`/suppliers/${e}/verification-status`,{verificationStatus:t});if(a.data&&"success"in a.data&&a.data.success)return i(a.data.data);{const e=a.data;return i(e)}}catch(a){throw(0,s.hS)(a)}},getSuppliersByVerificationStatus:async e=>{try{const t=await r.A.get("/suppliers",{params:{verificationStatus:e}});if(!t.data)throw new Error(`No suppliers found with status: ${e}`);return t.data}catch(t){throw(0,s.hS)(t)}},getSupplierDocuments:async(e,t)=>{try{const a=await r.A.get(`/suppliers/${e}/documents`,{params:t});return a.data?a.data:[]}catch(n){var a;if(404===(null===(a=n.response)||void 0===a?void 0:a.status)||404===n.status)return console.warn(`[TEMP] Documents endpoint not yet implemented for supplier ${e}`),[];throw(0,s.hS)(n)}},getSupplierAnalytics:async(e,t)=>{try{const a=await r.A.get(`/suppliers/${e}/analytics`,{params:t});return a.data?a.data:null}catch(n){var a;if(404===(null===(a=n.response)||void 0===a?void 0:a.status)||404===n.status)return console.warn(`[TEMP] Analytics endpoint not yet implemented for supplier ${e}`),null;throw(0,s.hS)(n)}},getSupplierProducts:async(e,t)=>{try{const a=await r.A.get(`/suppliers/${e}/products`,{params:t});if(!a.data)return[];let s=[];if(a.data.data&&a.data.data.products)s=a.data.data.products;else if(a.data.products)s=a.data.products;else{if(!Array.isArray(a.data))return console.warn(`[API] Unexpected response structure for supplier ${e} products:`,a.data),[];s=a.data}if(!Array.isArray(s))return console.warn(`[API] Expected array but received ${typeof s} for supplier ${e} products`),[];return s.map(l)}catch(n){var a;if(404===(null===(a=n.response)||void 0===a?void 0:a.status)||404===n.status)return console.warn(`[TEMP] Products endpoint not yet implemented for supplier ${e}`),[];throw(0,s.hS)(n)}},uploadSupplierImage:async(e,t)=>{try{const a=new FormData;a.append("image",t);const s=await r.A.post(`/suppliers/${e}/upload-image`,a,{headers:{"Content-Type":"multipart/form-data"}});if(!s.data)throw new Error("Failed to upload supplier image");return s.data}catch(a){throw(0,s.hS)(a)}},banSupplier:async e=>{try{const t=await r.A.put(`/suppliers/${e}/ban`,{status:"banned"});if(t.data&&"success"in t.data&&t.data.success)return i(t.data.data);{const e=t.data;return i(e)}}catch(t){throw(0,s.hS)(t)}},unbanSupplier:async e=>{try{const t=await r.A.put(`/suppliers/${e}/unban`);if(t.data&&"success"in t.data&&t.data.success)return i(t.data.data);{const e=t.data;return i(e)}}catch(t){throw(0,s.hS)(t)}}},c=o},7012:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5043);function s(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=r.forwardRef(s)},7098:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5043);function s(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=r.forwardRef(s)},8100:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(5043),s=a(7591),n=a(7950),i=a(579);const l=e=>{let{isOpen:t,onClose:a,title:l,children:o,size:c="md",footer:u,closeOnEsc:d=!0,closeOnBackdropClick:p=!0,showCloseButton:m=!0,centered:y=!0,className:f="",bodyClassName:h="",headerClassName:w="",footerClassName:g="",backdropClassName:v="",testId:b}=e;const S=(0,r.useRef)(null);if((0,r.useEffect)((()=>{const e=e=>{d&&"Escape"===e.key&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[t,a,d]),(0,r.useEffect)((()=>{if(!t||!S.current)return;const e=S.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(0===e.length)return;const a=e[0],r=e[e.length-1],s=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===a&&(r.focus(),e.preventDefault()):document.activeElement===r&&(a.focus(),e.preventDefault()))};return document.addEventListener("keydown",s),a.focus(),()=>{document.removeEventListener("keydown",s)}}),[t]),!t)return null;const k=(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity ${v}`,onClick:p?a:void 0,"data-testid":`${b}-backdrop`}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,i.jsx)("div",{className:`flex min-h-full items-${y?"center":"start"} justify-center p-4 text-center`,children:(0,i.jsxs)("div",{ref:S,className:`${{xs:"max-w-xs",sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[c]} w-full transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all ${f}`,onClick:e=>e.stopPropagation(),"data-testid":b,children:[(0,i.jsxs)("div",{className:`flex items-center justify-between px-6 py-4 border-b border-gray-100 ${w}`,children:["string"===typeof l?(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:l}):l,m&&(0,i.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary rounded-full p-1",onClick:a,"aria-label":"Close modal","data-testid":`${b}-close-button`,children:(0,i.jsx)(s.A,{className:"h-6 w-6"})})]}),(0,i.jsx)("div",{className:`px-6 py-4 ${h}`,children:o}),u&&(0,i.jsx)("div",{className:`px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end space-x-3 ${g}`,children:u})]})})})]});return(0,n.createPortal)(k,document.body)},o=(0,r.memo)(l)},8682:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5043);function s(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const n=r.forwardRef(s)},9248:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5043);function s(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const n=r.forwardRef(s)},9531:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5043);function s(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const n=r.forwardRef(s)},9850:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5043);function s(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const n=r.forwardRef(s)}}]);
//# sourceMappingURL=71.88c0d0ea.chunk.js.map