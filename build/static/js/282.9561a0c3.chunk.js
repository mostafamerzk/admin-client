"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[282],{233:(e,t,r)=>{r.d(t,{B:()=>n});var a=r(5043),s=r(9705);const n=(e,t)=>{const[r,n]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),{showNotification:d}=(0,s.A)(),m=(0,a.useRef)(e),u=(0,a.useRef)(d),g=(0,a.useRef)(t.entityName),h=(0,a.useRef)(!1);(0,a.useEffect)((()=>{m.current=e,u.current=d,g.current=t.entityName}));const x=(0,a.useCallback)((async e=>{i(!0),c(null);try{const t=await m.current.getAll(e);return n(t),t}catch(t){const e=t;throw c(e),u.current({type:"error",title:"Error",message:`Failed to fetch ${g.current}`}),e}finally{i(!1)}}),[]),y=(0,a.useCallback)((async e=>{i(!0),c(null);try{return await m.current.getById(e)}catch(t){const e=t;throw c(e),u.current({type:"error",title:"Error",message:`Failed to fetch ${g.current}`}),e}finally{i(!1)}}),[]);return(0,a.useEffect)((()=>{if(!1!==t.initialFetch&&!h.current){console.log(`[useEntityData] Starting initial fetch for ${t.entityName}`),h.current=!0;const r=async()=>{i(!0),c(null);try{console.log(`[useEntityData] Calling API for ${t.entityName}`);const r=await e.getAll();console.log(`[useEntityData] Received data for ${t.entityName}:`,r),n(r)}catch(r){const e=r;console.error(`[useEntityData] Error fetching ${t.entityName}:`,e),c(e),d({type:"error",title:"Error",message:`Failed to fetch ${t.entityName}`})}finally{console.log(`[useEntityData] Finished fetch for ${t.entityName}`),i(!1)}};r()}}),[]),{entities:r,isLoading:o,error:l,fetchEntities:x,getEntityById:y}}},282:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var a=r(5043),s=r(3216),n=r(2806),o=r(3593),i=r(7907),l=r(8100);function c(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const d=a.forwardRef(c);var m=r(7422),u=r(4538),g=r(7098),h=r(9531),x=r(2811),y=r(9248),p=r(579);const f=e=>{let{categories:t,onCategoryClick:r,onViewCategory:a,onEditCategory:s,onDeleteCategory:n,title:o="Categories",loading:i=!1}=e;const l=[{key:"id",label:"ID",sortable:!0,render:e=>(0,p.jsx)("span",{className:"text-xs text-gray-500",children:e})},{key:"name",label:"Name",sortable:!0,render:e=>(0,p.jsx)("span",{className:"font-medium text-gray-900",children:e})},{key:"description",label:"Description",sortable:!0},{key:"productCount",label:"Products",sortable:!0,render:e=>(0,p.jsx)("span",{className:"font-medium",children:e})},{key:"status",label:"Status",sortable:!0,render:e=>(0,p.jsxs)("div",{className:"flex items-center",children:["active"===e?(0,p.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-1"}):(0,p.jsx)(g.A,{className:"w-4 h-4 text-red-500 mr-1"}),(0,p.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]})},{key:"createdAt",label:"Created At",sortable:!0},{key:"actions",label:"Actions",render:(e,t)=>(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,p.jsx)("button",{className:"p-1 text-gray-500 hover:text-primary rounded-full hover:bg-gray-100",onClick:e=>{e.stopPropagation(),a(t)},children:(0,p.jsx)(h.A,{className:"w-5 h-5"})}),s&&(0,p.jsx)("button",{className:"p-1 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100",onClick:e=>{e.stopPropagation(),s(t)},children:(0,p.jsx)(x.A,{className:"w-5 h-5"})}),n&&(0,p.jsx)("button",{className:"p-1 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100",onClick:e=>{e.stopPropagation(),n(t)},children:(0,p.jsx)(y.A,{className:"w-5 h-5"})})]})}];return(0,p.jsx)(m.A,{columns:l,data:t,onRowClick:r,title:o,pagination:!0,loading:i})};var b=r(6773);const v=e=>{let{onSubmit:t,onCancel:r,isLoading:s=!1,parentCategories:n=[]}=e;const[o,l]=(0,a.useState)({name:"",description:"",status:"active",parentCategoryId:""}),[c,d]=(0,a.useState)({}),m=e=>{const{name:t,value:r}=e.target;l((e=>({...e,[t]:r}))),c[t]&&d((e=>({...e,[t]:""})))};return(0,p.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e=(0,b.l)({name:o.name,description:o.description},{name:[b.tU.required("Category name is required")],description:[b.tU.required("Description is required")]});return d(e),0===Object.keys(e).length})()&&t(o)},className:"space-y-6",children:[(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Category Name ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm "+(c.name?"border-red-300":"")}),c.name&&(0,p.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:["Description ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("textarea",{id:"description",name:"description",rows:3,value:o.description,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm "+(c.description?"border-red-300":"")}),c.description&&(0,p.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.description})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,p.jsxs)("select",{id:"status",name:"status",value:o.status,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:[(0,p.jsx)("option",{value:"active",children:"Active"}),(0,p.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"parentCategoryId",className:"block text-sm font-medium text-gray-700",children:"Parent Category"}),(0,p.jsxs)("select",{id:"parentCategoryId",name:"parentCategoryId",value:o.parentCategoryId,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:[(0,p.jsx)("option",{value:"",children:"None (Top Level Category)"}),n.map((e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),(0,p.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,p.jsx)(i.A,{type:"button",variant:"outline",onClick:r,disabled:s,children:"Cancel"}),(0,p.jsx)(i.A,{type:"submit",loading:s,children:"Add Category"})]})]})};var j=r(2517),w=r(6365);const N=e=>{let{data:t,onNodeSelect:r,selectedNodeId:s,className:n=""}=e;const[o,i]=(0,a.useState)({}),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=e.children&&e.children.length>0,n=o[e.id],c=e.id===s;return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"flex items-center py-2 px-3 hover:bg-gray-100 cursor-pointer "+(c?"bg-primary bg-opacity-10 text-primary":""),style:{paddingLeft:1.5*t+.75+"rem"},children:[a?(0,p.jsx)("button",{onClick:t=>{var r;t.stopPropagation(),r=e.id,i((e=>({...e,[r]:!e[r]})))},className:"mr-1 p-1 rounded-full hover:bg-gray-200 focus:outline-none",children:n?(0,p.jsx)(j.A,{className:"h-4 w-4 text-gray-500"}):(0,p.jsx)(w.A,{className:"h-4 w-4 text-gray-500"})}):(0,p.jsx)("span",{className:"w-6"}),(0,p.jsx)("div",{className:"flex-1 truncate",onClick:()=>r(e),children:e.name})]}),a&&n&&(0,p.jsx)("div",{children:e.children.map((e=>l(e,t+1)))})]},e.id)};return(0,p.jsx)("div",{className:`border rounded-md overflow-hidden ${n}`,children:t.map((e=>l(e)))})},C=e=>{let{categories:t,onCategorySelect:r,selectedCategoryId:s,className:n=""}=e;const o=(0,a.useMemo)((()=>{const e=new Map;t.forEach((t=>{e.set(t.id,{...t,children:[]})}));const r=[];return e.forEach((t=>{if(t.parentId){const a=e.get(t.parentId);a?a.children.push(t):r.push(t)}else r.push(t)})),r}),[t]),i=(0,a.useMemo)((()=>{const e=t=>({id:t.id,name:t.name,children:t.children.map((t=>e({...t,children:[]}))),originalData:t});return o.map((t=>e(t)))}),[o]);return(0,p.jsx)(N,{data:i,onNodeSelect:e=>{r(e.originalData)},selectedNodeId:s||"",className:n})};var k=r(233),E=r(9456);const A={getCategories:async e=>{try{const t=await E.A.get("/categories",{params:e});if(!t.data)throw new Error("No categories data received");return t.data}catch(t){throw console.error("Error fetching categories:",t),t}},getCategoryById:async e=>{try{const t=await E.A.get(`/categories/${e}`);if(!t.data)throw new Error(`No category data received for ID: ${e}`);return t.data}catch(t){throw console.error(`Error fetching category ${e}:`,t),t}},createCategory:async e=>{try{const t=await E.A.post("/categories",e);if(!t.data)throw new Error("Failed to create category");return t.data}catch(t){throw console.error("Error creating category:",t),t}},updateCategory:async(e,t)=>{try{const r=await E.A.put(`/categories/${e}`,t);if(!r.data)throw new Error(`Failed to update category ${e}`);return r.data}catch(r){throw console.error(`Error updating category ${e}:`,r),r}},deleteCategory:async e=>{try{await E.A.delete(`/categories/${e}`)}catch(t){throw console.error(`Error deleting category ${e}:`,t),t}},getSubcategories:async e=>{try{const t=await E.A.get("/categories",{params:{parentId:e}});if(!t.data)throw new Error(`No subcategories found for parent ID: ${e}`);return t.data}catch(t){throw console.error(`Error fetching subcategories for parent ${e}:`,t),t}}};var I=r(9705);const $=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initialFetch:!0};const t=(0,k.B)({getAll:A.getCategories,getById:A.getCategoryById,create:A.createCategory,update:A.updateCategory,delete:A.deleteCategory},{entityName:"categories",initialFetch:e.initialFetch}),{showNotification:r}=(0,I.A)(),s=(0,a.useCallback)((()=>{const e=t.entities.filter((e=>!e.parentId)),r=new Map;return e.forEach((e=>{r.set(e.id,{...e,subcategories:[]})})),t.entities.forEach((e=>{if(e.parentId){const t=r.get(e.parentId);t&&t.subcategories.push(e)}})),Array.from(r.values())}),[t.entities]);return{...t,categories:t.entities,fetchCategories:t.fetchEntities,getCategoryById:t.getEntityById,getCategoryHierarchy:s}};r(3109);var S=r(724);const D=()=>{const e=(0,s.Zp)(),{categories:t,isLoading:r,fetchCategories:c,getCategoryHierarchy:m}=$(),{showNotification:u}=(0,I.A)(),[g,h]=(0,a.useState)(null),[x,y]=(0,a.useState)(!1),[b,j]=(0,a.useState)("list"),w=t=>{h(t),e(S.b.getCategoryDetailsRoute(t.id))};return(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsx)(n.A,{title:"Categories",description:"Manage product categories",actions:(0,p.jsxs)("div",{className:"flex space-x-3",children:[(0,p.jsx)(i.A,{variant:"outline",onClick:()=>j("list"===b?"tree":"list"),children:"list"===b?"Tree View":"List View"}),(0,p.jsx)(i.A,{icon:(0,p.jsx)(d,{className:"h-5 w-5"}),onClick:()=>y(!0),children:"Add Category"})]})}),(0,p.jsx)(o.A,{children:"list"===b?(0,p.jsx)(f,{categories:t,onCategoryClick:w,loading:r}):(0,p.jsx)(C,{categories:t,onCategorySelect:w,selectedCategoryId:null===g||void 0===g?void 0:g.id})}),(0,p.jsx)(l.A,{isOpen:x,onClose:()=>y(!1),title:"Add Category",children:(0,p.jsx)(v,{onSubmit:async e=>{try{y(!1),await c(),u({type:"success",title:"Success",message:"Category added successfully"})}catch(t){u({type:"error",title:"Error",message:"Failed to add category"})}},onCancel:()=>y(!1),parentCategories:t.filter((e=>!e.parentId))})})]})}},2806:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(5043),s=r(5475),n=r(5501),o=r(6365),i=r(579);const l=e=>{let{title:t,description:r,actions:a,breadcrumbs:l,className:c="",testId:d}=e;return(0,i.jsxs)("div",{className:`mb-6 ${c}`,"data-testid":d,children:[l&&l.length>0&&(0,i.jsx)("nav",{className:"flex mb-4","aria-label":"Breadcrumb",children:(0,i.jsxs)("ol",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[(0,i.jsx)("li",{children:(0,i.jsx)(s.N_,{to:"/",className:"flex items-center hover:text-primary","aria-label":"Home",children:(0,i.jsx)(n.A,{className:"h-4 w-4"})})}),l.map(((e,t)=>(0,i.jsxs)("li",{className:"flex items-center",children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mx-1 text-gray-400"}),e.path&&t<l.length-1?(0,i.jsx)(s.N_,{to:e.path,className:"hover:text-primary",children:e.label}):(0,i.jsx)("span",{className:"font-medium text-gray-700",children:e.label})]},t)))]})}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:t}),r&&"string"===typeof r?(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r}):r]}),a&&(0,i.jsx)("div",{className:"flex flex-wrap gap-3 mt-2 sm:mt-0",children:a})]})]})},c=(0,a.memo)(l)},6365:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const n=a.forwardRef(s)},8100:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(5043),s=r(7591),n=r(7950),o=r(579);const i=e=>{let{isOpen:t,onClose:r,title:i,children:l,size:c="md",footer:d,closeOnEsc:m=!0,closeOnBackdropClick:u=!0,showCloseButton:g=!0,centered:h=!0,className:x="",bodyClassName:y="",headerClassName:p="",footerClassName:f="",backdropClassName:b="",testId:v}=e;const j=(0,a.useRef)(null);if((0,a.useEffect)((()=>{const e=e=>{m&&"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[t,r,m]),(0,a.useEffect)((()=>{if(!t||!j.current)return;const e=j.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(0===e.length)return;const r=e[0],a=e[e.length-1],s=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===r&&(a.focus(),e.preventDefault()):document.activeElement===a&&(r.focus(),e.preventDefault()))};return document.addEventListener("keydown",s),r.focus(),()=>{document.removeEventListener("keydown",s)}}),[t]),!t)return null;const w=(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity ${b}`,onClick:u?r:void 0,"data-testid":`${v}-backdrop`}),(0,o.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,o.jsx)("div",{className:`flex min-h-full items-${h?"center":"start"} justify-center p-4 text-center`,children:(0,o.jsxs)("div",{ref:j,className:`${{xs:"max-w-xs",sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[c]} w-full transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all ${x}`,onClick:e=>e.stopPropagation(),"data-testid":v,children:[(0,o.jsxs)("div",{className:`flex items-center justify-between px-6 py-4 border-b border-gray-100 ${p}`,children:["string"===typeof i?(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:i}):i,g&&(0,o.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary rounded-full p-1",onClick:r,"aria-label":"Close modal","data-testid":`${v}-close-button`,children:(0,o.jsx)(s.A,{className:"h-6 w-6"})})]}),(0,o.jsx)("div",{className:`px-6 py-4 ${y}`,children:l}),d&&(0,o.jsx)("div",{className:`px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end space-x-3 ${f}`,children:d})]})})})]});return(0,n.createPortal)(w,document.body)},l=(0,a.memo)(i)}}]);
//# sourceMappingURL=282.9561a0c3.chunk.js.map