"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[944],{1512:(e,r,t)=>{t.d(r,{A:()=>o});var s=t(5043),a=t(4703),n=t(9705);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{enableNotifications:r=!0,enableReporting:t=!0,onError:o}=e,{showNotification:l}=(0,n.A)(),[i,c]=(0,s.useState)({hasError:!1,error:null,errorType:null}),d=(0,s.useCallback)((()=>{c({hasError:!1,error:null,errorType:null})}),[]),m=(0,s.useCallback)(((e,s)=>{const n=(0,a.hS)(e,r?e=>{l({type:e.type,title:e.title,message:e.message})}:void 0);return c({hasError:!0,error:n,errorType:"api",...s&&{context:s}}),t&&e instanceof Error&&(0,a.N7)(e,s),o&&o(e,s),n}),[r,t,l,o]),u=(0,s.useCallback)(((e,t,s,n)=>{const i=(0,a.co)(e,t,s);return c({hasError:!0,error:i,errorType:"validation",...n&&{context:n}}),r&&l({type:"error",title:"Validation Error",message:i.message}),o&&o(i,n),i}),[r,l,o]),x=(0,s.useCallback)(((e,s,n)=>{(0,a.NC)(e,s,r?e=>{l({type:e.type,title:e.title,message:e.message})}:void 0),c({hasError:!0,error:e,errorType:"form",...n&&{context:n}}),t&&e instanceof Error&&(0,a.N7)(e,n),o&&o(e,n)}),[r,t,l,o]),h=(0,s.useCallback)(((e,s)=>{const n=e instanceof Error?e:new Error(String(e));return c({hasError:!0,error:n,errorType:"general",...s&&{context:s}}),r&&l({type:"error",title:"Error",message:n.message}),t&&(0,a.N7)(n,s),(0,a.vV)(n,s),o&&o(e,s),n}),[r,t,l,o]),p=(0,s.useCallback)((async(e,r)=>{try{return d(),await e()}catch(t){return m(t,r),null}}),[d,m]),f=(0,s.useCallback)((async(e,r,t)=>{try{return d(),await e()}catch(s){return x(s,r,t),null}}),[d,x]);return{...i,handleApiError:m,handleValidationError:u,handleFormError:x,handleGeneralError:h,clearError:d,withErrorHandling:p,withFormErrorHandling:f,isApiError:e=>e&&"object"===typeof e&&"status"in e,isValidationError:e=>e&&"object"===typeof e&&"field"in e}}},3619:(e,r,t)=>{t.d(r,{Ay:()=>c});var s=t(5043),a=t(7515),n=t(4703),o=t(579);const l=e=>{let{error:r,resetError:t}=e;return(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,o.jsx)("div",{className:"text-red-500 text-2xl mb-2",children:"\u26a0\ufe0f"}),(0,o.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Something went wrong"}),(0,o.jsx)("p",{className:"text-red-600 text-sm mb-4 text-center max-w-md",children:r.message||"An unexpected error occurred"}),(0,o.jsx)("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Try Again"})]})};function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fallback:t=l,onError:i,enableReporting:c=!0,context:d}=r,m=(0,s.forwardRef)(((r,s)=>(0,o.jsx)(a.A,{fallback:(0,o.jsx)(t,{error:new Error,resetError:()=>window.location.reload()}),onError:(r,t)=>{c&&(0,n.N7)(r,d||e.displayName||e.name,{componentStack:t.componentStack,errorBoundary:!0}),i&&i(r,t)},children:(0,o.jsx)(e,{...r,ref:s})})));return m.displayName=`withErrorBoundary(${e.displayName||e.name})`,m}const c=i},4791:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(5043);function a(e,r){let{title:t,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},n),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const n=s.forwardRef(a)},6944:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var s=t(5043),a=t(7907),n=t(3593),o=t(8100),l=t(4791);function i(e,r){let{title:t,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},n),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const c=s.forwardRef(i);var d=t(107),m=t(1512),u=t(4703),x=t(3619),h=t(579);const p=(0,x.Ay)((()=>{const[e,r]=(0,s.useState)("all"),[t,i]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[b,v]=(0,s.useState)((0,d.Nv)()),{handleGeneralError:E,withErrorHandling:j,withFormErrorHandling:k,clearError:N}=(0,m.A)({enableNotifications:!0,enableReporting:!0}),C=b.filter((r=>"all"===e||r.status===e)),A=e=>{g(e),w(!0)};return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Users"}),(0,h.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your users and their permissions"})]}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,h.jsx)(a.A,{variant:"outline",icon:(0,h.jsx)(l.A,{className:"h-5 w-5"}),onClick:async()=>{i(!0);const e=await(0,u.fN)((async()=>(await new Promise(((e,r)=>{setTimeout((()=>{Math.random()<.1?r(new Error("Export failed")):e(!0)}),1500)})),console.log("Exporting users..."),!0)),{timeout:5e3,retries:2,operationName:"Export Users"});e.success||E(e.error,"Export Users"),i(!1)},loading:t,children:"Export Users"}),(0,h.jsx)(a.A,{icon:(0,h.jsx)(c,{className:"h-5 w-5"}),onClick:()=>p(!0),children:"Add User"})]})]}),(0,h.jsxs)(n.A,{children:[(0,h.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,h.jsx)(a.A,{variant:"all"===e?"primary":"outline",size:"sm",onClick:()=>r("all"),children:"All Users"}),(0,h.jsx)(a.A,{variant:"active"===e?"primary":"outline",size:"sm",onClick:()=>r("active"),children:"Active Users"}),(0,h.jsx)(a.A,{variant:"banned"===e?"primary":"outline",size:"sm",onClick:()=>r("banned"),children:"Banned Users"})]}),(0,h.jsx)(d.w2,{users:C,onViewUser:A,onEditUser:e=>{console.log("Edit user (deprecated):",e)},onDeleteUser:async e=>{if(window.confirm(`Are you sure you want to delete ${e.name}?`)){await j((async()=>(await new Promise(((e,r)=>{setTimeout((()=>{Math.random()<.1?r(new Error("Failed to delete user")):e(!0)}),500)})),v(b.filter((r=>r.id!==e.id))),!0)),`Delete user ${e.name}`)||console.error("Failed to delete user")}},onUserClick:e=>{A(e)},title:`${e.charAt(0).toUpperCase()+e.slice(1)} (${C.length})`})]}),(0,h.jsx)(o.A,{isOpen:x,onClose:()=>p(!1),title:"Add New User",size:"lg",children:(0,h.jsx)(d.pC,{onSubmit:async e=>{i(!0),N();const r=await k((async()=>{await new Promise(((r,t)=>{setTimeout((()=>{b.some((r=>r.email===e.email))?t({response:{data:{errors:{email:["Email already exists"]}}}}):Math.random()<.1?t(new Error("Failed to create user")):r(!0)}),1500)}));const r={id:(b.length+1).toString(),name:e.name,email:e.email,type:e.type,status:"active",lastLogin:"-",avatar:e.image&&e.image instanceof File?URL.createObjectURL(e.image):"",address:e.address||"",businessType:e.businessType||"",phone:e.phone||""};return v([...b,r]),p(!1),r}),void 0,"Add User");i(!1),r&&console.log("User added successfully:",r)},onCancel:()=>p(!1),isLoading:t})}),f&&(0,h.jsx)(o.A,{isOpen:y,onClose:()=>w(!1),title:"User Details",size:"md",footer:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.A,{variant:"outline",onClick:()=>w(!1),children:"Close"}),(0,h.jsx)(a.A,{variant:"active"===f.status?"danger":"success",onClick:()=>(async e=>{const r=b.find((r=>r.id===e));if(!r)return;await j((async()=>(await new Promise(((e,r)=>{setTimeout((()=>{Math.random()<.1?r(new Error("Failed to update user status")):e(!0)}),500)})),v(b.map((r=>r.id===e?{...r,status:"active"===r.status?"banned":"active"}:r))),w(!1),!0)),`Toggle status for user ${r.name}`)||console.error("Failed to toggle user status")})(f.id),children:"active"===f.status?"Ban User":"Activate User"})]}),children:(0,h.jsx)(d.ID,{user:f,userOrders:[]})})]})}),{fallback:e=>{let{error:r,resetError:t}=e;return(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:[(0,h.jsx)("div",{className:"text-red-500 text-4xl mb-4",children:"\u26a0\ufe0f"}),(0,h.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Users Page Error"}),(0,h.jsx)("p",{className:"text-gray-600 mb-4 text-center max-w-md",children:r.message||"An error occurred while loading the users page"}),(0,h.jsx)("button",{onClick:t,className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark transition-colors",children:"Reload Page"})]})},context:"UsersPage"})},8100:(e,r,t)=>{t.d(r,{A:()=>i});var s=t(5043),a=t(7591),n=t(7950),o=t(579);const l=e=>{let{isOpen:r,onClose:t,title:l,children:i,size:c="md",footer:d,closeOnEsc:m=!0,closeOnBackdropClick:u=!0,showCloseButton:x=!0,centered:h=!0,className:p="",bodyClassName:f="",headerClassName:g="",footerClassName:y="",backdropClassName:w="",testId:b}=e;const v=(0,s.useRef)(null);if((0,s.useEffect)((()=>{const e=e=>{m&&"Escape"===e.key&&t()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[r,t,m]),(0,s.useEffect)((()=>{if(!r||!v.current)return;const e=v.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(0===e.length)return;const t=e[0],s=e[e.length-1],a=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(s.focus(),e.preventDefault()):document.activeElement===s&&(t.focus(),e.preventDefault()))};return document.addEventListener("keydown",a),t.focus(),()=>{document.removeEventListener("keydown",a)}}),[r]),!r)return null;const E=(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity ${w}`,onClick:u?t:void 0,"data-testid":`${b}-backdrop`}),(0,o.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,o.jsx)("div",{className:`flex min-h-full items-${h?"center":"start"} justify-center p-4 text-center`,children:(0,o.jsxs)("div",{ref:v,className:`${{xs:"max-w-xs",sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[c]} w-full transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all ${p}`,onClick:e=>e.stopPropagation(),"data-testid":b,children:[(0,o.jsxs)("div",{className:`flex items-center justify-between px-6 py-4 border-b border-gray-100 ${g}`,children:["string"===typeof l?(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:l}):l,x&&(0,o.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary rounded-full p-1",onClick:t,"aria-label":"Close modal","data-testid":`${b}-close-button`,children:(0,o.jsx)(a.A,{className:"h-6 w-6"})})]}),(0,o.jsx)("div",{className:`px-6 py-4 ${f}`,children:i}),d&&(0,o.jsx)("div",{className:`px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end space-x-3 ${y}`,children:d})]})})})]});return(0,n.createPortal)(E,document.body)},i=(0,s.memo)(l)}}]);
//# sourceMappingURL=944.863f46d8.chunk.js.map